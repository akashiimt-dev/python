// dropdown-utils.js
export function addDropdownEventListeners(dropdown) {
  dropdown.addEventListener('keydown', (event) => {
    const items = Array.from(dropdown.querySelectorAll('li'));
    const currentIndex = items.findIndex(item => item === document.activeElement);

    switch (event.key) {
      case 'ArrowDown':
        event.preventDefault();
        const nextIndex = (currentIndex + 1) % items.length;
        items[nextIndex].focus();
        break;
      case 'ArrowUp':
        event.preventDefault();
        const prevIndex = (currentIndex - 1 + items.length) % items.length;
        items[prevIndex].focus();
        break;
      case 'Enter':
      case 'Space':
        if (currentIndex > -1) {
          console.log(`Selected: ${items[currentIndex].textContent}`);
          dropdown.parentElement.querySelector('button').focus(); // Return focus to button
        }
        break;
      case 'Escape':
        dropdown.parentElement.querySelector('button').focus(); // Return focus to button
        break;
    }
  });
}
